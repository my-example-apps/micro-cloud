CREATE SEQUENCE IF NOT EXISTS HIBERNATE_SEQUENCE START WITH 1 INCREMENT BY 1;
--DROP TABLE IF EXISTS SEC.TEST;
CREATE TABLE PERMISSION
(
    ID       NUMBER(19) GENERATED BY DEFAULT AS IDENTITY,
    CODE     VARCHAR(60),
    NAME     VARCHAR(80),
    DISABLED NUMBER (1) NOT NULL DEFAULT 0
);

CREATE TABLE ROLE
(
    ID       NUMBER(19) GENERATED BY DEFAULT AS IDENTITY,
    CODE     VARCHAR(60),
    NAME     VARCHAR(80),
    DISABLED NUMBER (1) NOT NULL DEFAULT 0
);

CREATE TABLE ROLE_PERMISSION
(
    ROLE_ID       NUMBER(19),
    PERMISSION_ID NUMBER(19),

    CONSTRAINT PK_ROLE_PERMISSION PRIMARY KEY (ROLE_ID, PERMISSION_ID),
    CONSTRAINT FK_ROLE_PERMISSION_1
        FOREIGN KEY (ROLE_ID)
            REFERENCES ROLE (ID),
    CONSTRAINT FK_ROLE_PERMISSION_2
        FOREIGN KEY (PERMISSION_ID)
            REFERENCES PERMISSION (ID)
);

CREATE TABLE USER
(
    ID       NUMBER(19) GENERATED BY DEFAULT AS IDENTITY,
    USERNAME VARCHAR(60)  NOT NULL UNIQUE,
    PASSWORD VARCHAR(255) NOT NULL,
    NICKNAME VARCHAR(80)  NOT NULL,
    LOCKED   NUMBER (1) NOT NULL DEFAULT 0,
    DISABLED NUMBER (1) NOT NULL DEFAULT 0
);

CREATE TABLE USER_ROLE
(
    ROLE_ID NUMBER(19),
    USER_ID NUMBER(19)
);

CREATE TABLE TEST
(
    ID   BIGINT GENERATED BY DEFAULT AS IDENTITY,
    NAME VARCHAR(30)
);